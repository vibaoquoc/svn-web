<div class="blogbody">
<p><a href="[% script %]/[% repos %]/log[% path %]">Revision Log</a></p>
<div class="title">
<a href="[% script %]/[% repos %]/revision?rev=[% rev %]">[%|l(rev)%]revision %1[%END%]</a> - [% author || '(no author)' %] - [% date %]:<br />
</div>
<p>
[% msg | html | html_line_break %]
</p>
[% FOREACH file = paths %]
[% file.value.action %] -
[% IF file.value.isdir %]
<a href="[% script %]/[% repos %]/browse[% file.key %]/?rev=[% rev %]">[% file.key %]</a>
[% IF file.value.copyfrom %]
<a href="[% script %]/[% repos %]/browse[% file.value.copyfrom %]/?rev=[% file.value.copyfromrev %]">[%|l(file.value.copyfrom, file.value.copyfromrev)%](from %1:%2)[%END%]</a>
[% END %]

[% ELSE %]
[% IF file.value.action == 'D' %]
[% file.key %]
[% ELSE %]
<a href="[% script %]/[% repos %]/view[% file.key %]?rev=[% rev %]">[% file.key %]</a>
<a href="[% script %]/[% repos %]/checkout[% file.key %]?rev=[% rev %]">[%|l%](checkout)[%END%]</a>
[% END %]
[% IF file.value.copyfrom %]
<a href="[% script %]/[% repos %]/view[% file.value.copyfrom %]?rev=[% file.value.copyfromrev %]">[%|l(file.value.copyfrom, file.value.copyfromrev)%](from %1:%2)[%END%]</a>
[% END %]
[% END %]

<br />
[% END %]
<div id="preview">
  [% IF mimetype.match('^text/') %]
    <pre class="code-block">[% file | html %]</pre>
  [% ELSIF mimetype.match('^image/') %]
    <img src="[% script %]/[% repos %]/checkout[% path %]" />
  [% ELSE %]
<p>This file can not be displayed in the browser.  You can <a href="[% script %]/[% repos %]/checkout[% path %]">download it</a>.</p>
  [% END %]
</div>
